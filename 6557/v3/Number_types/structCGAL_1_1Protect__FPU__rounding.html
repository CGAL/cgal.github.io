<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="canonical" href="https://doc.cgal.org/latest/Number_types/structCGAL_1_1Protect__FPU__rounding.html"/>

<link rel="icon" type="image/png" href="../Manual/g-196x196-doc.png">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=11">
<meta name="generator" content="Doxygen 1.9.6">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CGAL 6.1 - Number Types: CGAL::Protect_FPU_rounding&lt; Protected &gt; Struct Template Reference</title>
<!-- <link href="../Manual/tabs.css" rel="stylesheet" type="text/css"/> -->
<script type="text/javascript" src="../Manual/jquery.js"></script>
<script type="text/javascript" src="../Manual/dynsections.js"></script>
<script src="../Manual/hacks.js" type="text/javascript"></script>
<!-- Manually include treeview and search to avoid bloat and to fix
     paths to the directory Manual . -->
<!-- $.treeview -->
<!-- $.search -->
<link href="navtree.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="../Manual/resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../Manual/search/search.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="../Manual/search/searchdata.js"></script>
<script type="text/javascript" src="../Manual/search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../Manual/search/search.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="../Manual/search/search.js"></script>
<!-- Manually done below. -->
<link href="../Manual/doxygen.css" rel="stylesheet" type="text/css">
<link href="../Manual/cgal_stylesheet.css" rel="stylesheet" type="text/css">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
//<![CDATA[
MathJax.Hub.Config(
{
  TeX: {
      Macros: {
          qprel: [ "{\\gtreqless}", 0],
          qpx: [ "{\\mathbf{x}}", 0],
          qpl: [ "{\\mathbf{l}}", 0],
          qpu: [ "{\\mathbf{u}}", 0],
          qpc: [ "{\\mathbf{c}}", 0],
          qpb: [ "{\\mathbf{b}}", 0],
          qpy: [ "{\\mathbf{y}}", 0],
          qpw: [ "{\\mathbf{w}}", 0],
          qplambda: [ "{\\mathbf{\\lambda}}", 0],
          ssWpoint: [ "{\\bf #1}", 1],
          ssWeight: [ "{w_{#1}}", 1],
          dabs: [ "{\\parallel\\! #1 \\!\\parallel}", 1],
          E: [ "{\\mathrm{E}}", 0],
          A: [ "{\\mathrm{A}}", 0],
          R: [ "{\\mathrm{R}}", 0],
          N: [ "{\\mathrm{N}}", 0],
          Q: [ "{\\mathrm{Q}}", 0],
          Z: [ "{\\mathrm{Z}}", 0],
          ccSum: [ "{\\sum_{#1}^{#2}{#3}}", 3],
          ccProd: [ "{\\prod_{#1}^{#2}{#3}}", 3],
          pyr: [ "{\\operatorname{Pyr}}", 0],
          aff: [ "{\\operatorname{aff}}", 0],
          Ac: [ "{\\cal A}", 0],
          Sc: [ "{\\cal S}", 0],
      },
      equationNumbers: { autoNumber: "AMS" }
  }
}
);
MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
  var PARSE = MathJax.InputJax.TeX.Parse,
      TEXT = PARSE.prototype.InternalText;
  PARSE.Augment({
    InternalText: function (text,def) {
      text = text.replace(/\\/g,"");
      return TEXT.call(this,text,def);
    }
  });
});
//]]>
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<script src="modules.js" type="text/javascript"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="back-nav">
  <ul>
    <li><a href="https://www.cgal.org/">cgal.org</a></li>
    <li><a href="../Manual/index.html">Top</a></li>
    <li><a href="../Manual/general_intro.html">Getting Started</a></li>
    <li><a href="../Manual/tutorials.html">Tutorials</a></li>
    <li><a href="../Manual/packages.html">Package Overview</a></li>
    <li><a href="../Manual/how_to_cite_cgal.html">Acknowledging CGAL</a></li>
  </ul>
  <!-- In a package SEARCHENGINE = false, so we cannot use 
       insertion. That's why we have to do it manually here. Notice
       that we also take pngs from the Manual. -->
  <div id="MSearchBox" class="MSearchBoxInactive">
      <span class="left">
         <span id="MSearchSelect" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"> 
        </span>
        <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)">
      </span>
      <span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../Manual/search/close.svg" alt=""></a>
      </span>
  </div>
</div>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CGAL 6.1 - Number Types
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Code below is usually inserted by doxygen when SEARCHENGINE =
     true. Notice that the path to the search directory is adjusted to
     the top-level.-->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../Manual/search/",'.html');
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>
<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync" style="display: none"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('structCGAL_1_1Protect__FPU__rounding.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="structCGAL_1_1Protect__FPU__rounding-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">CGAL::Protect_FPU_rounding&lt; Protected &gt; Struct Template Reference<div class="ingroups"><a class="el" href="group__PkgNumberTypesRef.html">Number Types Reference</a> » <a class="el" href="group__nt__util.html">Utilities</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;CGAL/FPU.h&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Definition</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename Protected&gt;<br>
struct CGAL::Protect_FPU_rounding&lt; Protected &gt;</div><p>The class <code><a class="el" href="structCGAL_1_1Protect__FPU__rounding.html" title="The class Protect_FPU_rounding allows to reduce the number of rounding mode changes when evaluating s...">Protect_FPU_rounding</a></code> allows to reduce the number of rounding mode changes when evaluating sequences of interval arithmetic operations. </p>
<p><a class="anchor" id="protect_fpu_rouding"></a> Floating-point arithmetic, as specified by the IEEE-754 standard, allows to use so-called directed rounding for the following arithmetic operations: addition, subtraction, multiplication, division and square root. The default behavior is that the result of such an arithmetic operation is the closest floating-point number to the exact real result of the operation (rounding to the nearest). The other rounding modes are: round towards plus infinity, round towards minus infinity, and round towards zero.</p>
<p>Interval arithmetic uses such directed rounding modes to offer guaranteed enclosures for the evaluation of real functions, such as with CGAL's <code><a class="el" href="classCGAL_1_1Interval__nt.html" title="The class Interval_nt provides an interval arithmetic number type.">Interval_nt</a></code> class.</p>
<p>In order to efficiently evaluate sequences of interval arithmetic operations, such as a geometric predicate computing for example a determinant, it is advised to reduce the number of rounding mode changes, which otherwise are performed for each arithmetic operation. CGAL exploits the fact that it is possible to compute a sequence of interval arithmetic operations by doing only one rounding mode change around the whole function evaluation in order to benefit from this optimization.</p>
<p>The class <code><a class="el" href="structCGAL_1_1Protect__FPU__rounding.html" title="The class Protect_FPU_rounding allows to reduce the number of rounding mode changes when evaluating s...">Protect_FPU_rounding</a></code> allows to easily benefit from this. Its constructor saves the current rounding mode in the object, and then sets the current rounding mode to the value provided as argument to the constructor. The destructor sets the rounding mode back to the saved value. This allows to protect a block of code determined by a C++ scope, and have the destructor take care of restoring the value automatically.</p>
<p>The related class <code><a class="el" href="classCGAL_1_1Set__ieee__double__precision.html" title="The class Set_ieee_double_precision provides a mechanism to set the correct 53 bits precision for a b...">Set_ieee_double_precision</a></code> allows to similarly protect a block of code from excess precision on some machines (x86 typically with the traditional FPU, not the more recent SSE2). Note that <code><a class="el" href="structCGAL_1_1Protect__FPU__rounding.html" title="The class Protect_FPU_rounding allows to reduce the number of rounding mode changes when evaluating s...">Protect_FPU_rounding</a></code>, when changing rounding modes, also sets the precision to the correct 64 bit precision, hence providing a similar effect to <code><a class="el" href="classCGAL_1_1Set__ieee__double__precision.html" title="The class Set_ieee_double_precision provides a mechanism to set the correct 53 bits precision for a b...">Set_ieee_double_precision</a></code>. This notably affects the <code><a class="elRef" href="../Modular_arithmetic/classCGAL_1_1Residue.html">Residue</a></code> class.</p>
<p>Note for Visual C++ 64-bit users: due to a compiler bug, the stack unwinding process happening when an exception is thrown does not correctly execute the rounding mode restoration when the <code><a class="el" href="structCGAL_1_1Protect__FPU__rounding.html" title="The class Protect_FPU_rounding allows to reduce the number of rounding mode changes when evaluating s...">Protect_FPU_rounding</a></code> object is destroyed. Therefore, for this configuration, some explicit code has to be added.</p>
<p><b>Parameters</b><br>
</p>
<p>The template parameter <code>Protected</code> is a Boolean parameter, which defaults to <code>true</code>. It follows the same parameter of the <code><a class="el" href="classCGAL_1_1Interval__nt.html" title="The class Interval_nt provides an interval arithmetic number type.">Interval_nt</a></code> class. When it is <code>false</code>, the constructor and the destructor of the class do nothing (this is meant to be used in a context where you know that the rounding mode change has been taken care of at a higher level in the call stack.</p>
<p>What follows describes the behavior when the parameter has its default value, <code>true</code>.</p>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="classCGAL_1_1Set__ieee__double__precision.html" title="The class Set_ieee_double_precision provides a mechanism to set the correct 53 bits precision for a b...">CGAL::Set_ieee_double_precision</a></code> </dd></dl>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Creation</h2></td></tr>
<tr class="memitem:a1352e36fc57985392a63be9aa1846f30"><td class="memItemLeft" align="right" valign="top"><a id="a1352e36fc57985392a63be9aa1846f30" name="a1352e36fc57985392a63be9aa1846f30"></a>
 </td><td class="memItemRight" valign="bottom"><b>Protect_FPU_rounding</b> (FPU_CW_t r=CGAL_FE_UPWARD)</td></tr>
<tr class="memdesc:a1352e36fc57985392a63be9aa1846f30"><td class="mdescLeft"> </td><td class="mdescRight">The current rounding mode is saved in the object, and rounding mode is set to <code>r</code> which can be any of <code>CGAL_FE_TONEAREST</code>, <code>CGAL_FE_TOWARDZERO</code>, <code>CGAL_FE_UPWARD</code> (the default) and <code>CGAL_FE_DOWNWARD</code>. <br></td></tr>
<tr class="separator:a1352e36fc57985392a63be9aa1846f30"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:adbfdb3a1d5d6d4776193115cecb51d22"><td class="memItemLeft" align="right" valign="top"><a id="adbfdb3a1d5d6d4776193115cecb51d22" name="adbfdb3a1d5d6d4776193115cecb51d22"></a>
 </td><td class="memItemRight" valign="bottom"><b>~Protect_FPU_rounding</b> ()</td></tr>
<tr class="memdesc:adbfdb3a1d5d6d4776193115cecb51d22"><td class="mdescLeft"> </td><td class="mdescRight">The rounding mode is restored to the saved value. <br></td></tr>
<tr class="separator:adbfdb3a1d5d6d4776193115cecb51d22"><td class="memSeparator" colspan="2"> </td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.6-->
<!-- start footer part -->
<!-- The footer div is not part of the default but we require it to
move the footer to the bottom of the page. -->
<div id="footer">
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>CGAL</b></li><li class="navelem"><a class="el" href="structCGAL_1_1Protect__FPU__rounding.html">Protect_FPU_rounding</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"></a> 1.9.6 </li>
  </ul>
</div>
</div>
</body>



</html>
